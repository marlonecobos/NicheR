% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_ellps.R
\name{build_ellps}
\alias{build_ellps}
\title{Build a 2D or 3D Ellipsoid Object}
\usage{
build_ellps(
  center = c(x = 0, y = 0),
  axes = c(1, 1),
  angles = 0,
  n_points = 100
)
}
\arguments{
\item{center}{A numeric vector of length 2 or 3 defining the ellipsoid's center.
This vector can be named (e.g., `c(Temp = 15, Precip = 800)`) to link
dimensions to environmental variables.}

\item{axes}{A numeric vector with the same length as `center`, defining the
semi-axis lengths *before* rotation. These values represent the standard
deviations of the ellipsoid along its principal axes. Must be positive.}

\item{angles}{A numeric vector of rotation angles in radians. For 2D, a single
angle is sufficient. For 3D, a vector of three angles `c(ax, ay, az)`
is required, corresponding to rotations around the x, y, and z axes,
respectively.}

\item{n_points}{An integer specifying the resolution for the plotted
surface. A higher value results in a smoother surface but increases
computation time and file size.}
}
\value{
An S3 object of class `ellipsoid`, which is a list containing:
  \item{center}{The numeric vector defining the ellipsoid's center.}
  \item{axes}{The numeric vector of semi-axis lengths.}
  \item{angles}{The numeric vector of rotation angles.}
  \item{dimen}{The dimensionality of the ellipsoid (2 or 3).}
  \item{R}{The rotation matrix used to orient the ellipsoid.}
  \item{Sigma}{The covariance matrix of the ellipsoid, based on `axes` and
    `R`.}
  \item{Sigma_inv}{The inverse of the covariance matrix, useful for
    Mahalanobis distance calculations.}
  \item{surface}{A data frame of points representing the ellipsoid's surface,
    suitable for plotting.}
}
\description{
Creates a structured object representing a rotated ellipsoid. This object
contains all necessary matrices for geometric and statistical calculations,
as well as surface points for plotting. This function is a core component for
defining virtual niches in environmental space.
}
\details{
The function internally calculates the covariance matrix (`Sigma`)
  and its inverse, which are fundamental for computing Mahalanobis distance
  to determine if a point falls within the ellipsoid. The `surface` points
  are generated as a set of points on a unit sphere (in 3D) or circle (in 2D)
  that are then scaled by `axes` and rotated by `R` before being shifted to
  the `center`.
}
\concept{ellipsoid functions}
