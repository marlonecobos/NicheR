% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_virtual_species.R
\name{create_virtual_species}
\alias{create_virtual_species}
\title{Create a virtual species end to end}
\usage{
create_virtual_species(
  ...,
  out.file = FALSE,
  out.file.name = NULL,
  verbose = TRUE
)
}
\arguments{
\item{...}{Named arguments passed to the component functions.
Arguments are routed by name to the matching formal parameters of
[build_ellps()], [get_suitable_env()], [set_bias_surface()], and
[get_sample_occ()]. Unknown names are ignored with a warning.}

\item{out.file}{Logical. If `TRUE`, save the returned object to an `.rds`
file in the working directory.}

\item{out.file.name}{Optional base name (without extension) for the saved
file. If `NULL` or empty, a timestamped name is used.}

\item{verbose}{Logical. If `TRUE`, print progress messages.}
}
\value{
A list of class **NicheR_species** with elements:
\itemize{
  \item \code{niche}: the ellipsoid object returned by [build_ellps()].
  \item \code{suitability}: suitability surface from [get_suitable_env()].
  \item \code{bias_surface}: optional \code{nicheR_bias_surface} object
        returned by [set_bias_surface()] (or \code{NULL} if no bias was used).
  \item \code{occurrences}: sampled occurrences from [get_sample_occ()].
  \item \code{call_args}: the original `...` captured as a named list.
  \item \code{routed_args}: a list showing which args went to each function.
  \item \code{save_path}: file path if \code{out.file = TRUE}, otherwise `NULL`.
}
}
\description{
Orchestrates the full NicheR workflow by routing `...` to
[build_ellps()], [get_suitable_env()], [set_bias_surface()], and
[get_sample_occ()]. Returns an S3 object of class **NicheR_species**
containing the niche object, suitability, (optional) bias surface,
and sampled occurrences.
}
\details{
If any component function requires `env_bg` and it is supplied only at the
top level, it is forwarded to that function automatically. If a required
argument (such as `env_bg`) is missing for a component, the function stops
with an informative error.

If bias-related arguments (e.g. `bias_surface`, `bias_dir`, `bias_template`,
`bias_res`, `bias_ext`) are provided, a pooled bias surface is built via
[set_bias_surface()] and stored in the output. This precomputed bias object
is also passed into [get_sample_occ()] so that bias is not recomputed.
}
\section{Workflow}{

1. Calls [build_ellps()] to define the ellipsoid in E-space.
2. Calls [get_suitable_env()] to compute suitability in G-space.
3. Optionally calls [set_bias_surface()] to build a pooled bias raster
   when bias arguments are supplied.
4. Calls [get_sample_occ()] to sample occurrences from the suitable
   (and optionally biased) environment.
}

\seealso{
[build_ellps()], [get_suitable_env()], [set_bias_surface()],
  [get_sample_occ()]
}
