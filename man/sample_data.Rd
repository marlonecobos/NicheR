% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sample_data.R
\name{sample_data}
\alias{sample_data}
\title{Sample Occurrence Data from a Prediction Surface}
\usage{
sample_data(
  n_occ,
  prediction,
  prediction_layer = NULL,
  sampling = "centroid",
  method = "suitability",
  sampling_mask = NULL,
  seed = 1,
  verbose = TRUE
)
}
\arguments{
\item{n_occ}{Integer. Number of occurrences to sample.}

\item{prediction}{Prediction object to sample from. Typically a
\code{terra::SpatRaster} or a data.frame. This is resolved by
\code{resolve_prediction()}.}

\item{prediction_layer}{Optional. Layer name or index used by
\code{resolve_prediction()} when \code{prediction} contains multiple layers.}

\item{sampling}{Character. Sampling bias direction. One of:
\itemize{
  \item \code{"centroid"}: sample more from high suitability or low distance
  \item \code{"edge"}: sample more from low suitability or high distance
  \item \code{"random"}: sample uniformly
}}

\item{method}{Character. Interpretation of \code{prediction} values. One of:
\itemize{
  \item \code{"suitability"}: values must be in [0, 1]
  \item \code{"mahalanobis"}: values treated as a distance-like measure (>= 0)
}}

\item{sampling_mask}{Optional. Restriction mask applied only when
\code{prediction} resolves to a \code{terra::SpatRaster}. Must be a
\code{terra::SpatRaster} or \code{terra::SpatVector}.}

\item{seed}{Numeric. Random seed.}

\item{verbose}{Logical. If \code{TRUE}, prints progress messages.}
}
\value{
A data.frame of sampled points.
If raster input is used, includes \code{x} and \code{y} columns plus any
extracted columns (excluding the internal prediction column).
}
\description{
Samples \code{n_occ} occurrence locations from a prediction surface using
weighted random sampling. The prediction can be provided as a
\code{terra::SpatRaster} or a data.frame containing prediction values.
}
\details{
The user must specify whether the prediction values represent
\code{"suitability"} (expected range [0, 1]) or \code{"mahalanobis"}
(distance or distance-squared values).


Weighting rules:
\itemize{
  \item \code{sampling = "random"}: uniform weights.
  \item \code{method = "suitability"}:
    \code{"centroid"} uses \eqn{w = pred + eps}, \code{"edge"} uses
    \eqn{w = (1 - pred) + eps}.
  \item \code{method = "mahalanobis"}:
    \code{"centroid"} uses \eqn{w = 1 / (pred + eps)}, \code{"edge"} uses
    \eqn{w = pred + eps}.
}

If \code{method = "suitability"} and any finite prediction values fall outside
[0, 1] (with a small tolerance), the function stops with an error advising the
user to switch \code{method} or rescale their prediction.
}
