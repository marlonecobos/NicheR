% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_sample_occ.R
\name{get_sample_occ}
\alias{get_sample_occ}
\title{Sample Occurrence Points from a Suitable Environment}
\usage{
get_sample_occ(
  n_occ,
  env_bg,
  niche,
  method = c("random", "center", "edge"),
  seed = NULL
)
}
\arguments{
\item{n_occ}{Integer; the number of occurrence points to sample.}

\item{env_bg}{A `terra::SpatRaster`, `data.frame`, or `matrix` of
environmental predictor variables. It must contain the variables
referenced by the `niche` object. If a `data.frame` is used, it should also
contain 'x' and 'y' columns for spatial referencing.}

\item{niche}{An object of class `ellipsoid` created by `build_ellipsoid()`.}

\item{method}{A character string specifying the sampling strategy. Can be
one of `"random"`, `"center"`, or `"edge"`.
\itemize{
  \item `"random"`: Samples are drawn with uniform probability from the
    suitable environmental space.
  \item `"center"`: Sampling probability is inversely proportional to
    the Mahalanobis distance, favoring points closer to the niche center.
  \item `"edge"`: Sampling probability is proportional to the Mahalanobis
    distance, favoring points closer to the niche boundary.
}}

\item{seed}{An integer used to set the random number generator seed for
reproducible results.}
}
\value{
A `data.frame` containing `n_occ` sampled rows from `env_bg`,
  including the 'x' and 'y' coordinates and the environmental predictor values.
}
\description{
This function samples occurrence points from a background environmental
dataset based on a defined ellipsoid niche. Sampling can be biased towards
the center, the edge, or be purely random.
}
\details{
The function first identifies all points within the ellipsoid niche
  using the Mahalanobis distance. It then applies a weighting scheme based on
  the `method` argument to probabilistically select `n_occ` points from this
  suitable environment pool.
  The Mahalanobis distance squared is defined as:
  \deqn{(x - \mu)^T \Sigma^{-1} (x - \mu)}{ (x - mu)^T Sigma^-1 (x - mu) }
  where \eqn{x} is a point in environmental space, \eqn{\mu} is the niche center, and
  \eqn{\Sigma^{-1}} is the inverse covariance matrix. Points with a distance
  \eqn{\le 1} are considered suitable.
}
\examples{
\dontrun{
# Assuming `build_ellipsoid` and `get_suitable_env` are available
# Define a 3D niche
my_niche <- build_ellipsoid(center = c(10, 50, 20),
                            axes = c(5, 15, 8),
                            angles = c(0, 0.5, 0.2))

# Create a sample environmental background dataset
set.seed(123)
env_data <- data.frame(
  x = runif(50000), y = runif(50000),
  Var1 = rnorm(50000, 10, 10),
  Var2 = rnorm(50000, 50, 10),
  Var3 = rnorm(50000, 20, 10)
)

# Sample 1000 random occurrences from the suitable area
occ_random <- get_sample_occ(n_occ = 1000,
                             env_bg = env_data,
                             niche = my_niche,
                             method = "random")

# Sample 1000 occurrences biased towards the center
occ_center <- get_sample_occ(n_occ = 1000,
                             env_bg = env_data,
                             niche = my_niche,
                             method = "center")
}
}
\seealso{
[build_ellipsoid()], [get_suitable_env()]
}
