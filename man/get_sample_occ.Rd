% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_sample_occ.R
\name{get_sample_occ}
\alias{get_sample_occ}
\title{Sample Occurrence Points from a Suitable Environment}
\usage{
get_sample_occ(
  n_occ,
  env_bg = NULL,
  niche,
  method = c("random", "center", "edge"),
  bias_surface = NULL,
  bias_dir = 1,
  bias_template = NULL,
  bias_res = NULL,
  bias_ext = NULL,
  suitable_env = NULL,
  seed = NULL
)
}
\arguments{
\item{n_occ}{Integer; the number of occurrence points to sample.}

\item{env_bg}{Optional. A \code{terra::SpatRaster}, \code{data.frame}, or
\code{matrix} of environmental predictor variables. It must contain the
variables referenced by the \code{niche} object. If a \code{data.frame}
is used, it should also contain \code{x} and \code{y} columns for spatial
referencing. Required if \code{suitable_env} is not provided, or if
\code{bias_surface} is used and no explicit template is given.}

\item{niche}{An object of class \code{ellipsoid} created by
\code{build_ellipsoid()}.}

\item{method}{A character string specifying the sampling strategy. One of
\code{"random"}, \code{"center"}, or \code{"edge"}:
\itemize{
  \item \code{"random"}: Samples are drawn with uniform probability from
    the suitable environmental space.
  \item \code{"center"}: Sampling probability is inversely proportional to
    the Mahalanobis distance, favoring points closer to the niche center.
  \item \code{"edge"}: Sampling probability is proportional to the
    Mahalanobis distance, favoring points closer to the niche boundary.
}}

\item{bias_surface}{Optional. Either:
\itemize{
  \item one or more bias layers (SpatRaster, SpatVector, path, or list)
        that will be passed to \code{set_bias_surface()}, or
  \item a precomputed \code{nicheR_bias_surface} object returned by
        \code{set_bias_surface()}.
}
The resulting pooled bias surface is used to modulate sampling weights
over the suitable pool of environments.}

\item{bias_dir}{Optional numeric values of \code{1} or \code{-1} passed
to \code{set_bias_surface()} when \code{bias_surface} is a raw bias
input. A length-1 value is recycled across layers.}

\item{bias_template}{Optional \code{terra::SpatRaster} template to pass to
\code{set_bias_surface()} (overrides templates inferred from
\code{env_bg} or \code{suitable_env}).}

\item{bias_res}{Optional numeric resolution to pass to
\code{set_bias_surface()} when building a template from \code{ext}.}

\item{bias_ext}{Optional extent object (SpatRaster, SpatVector, or numeric
\code{c(xmin, xmax, ymin, ymax)}) passed to \code{set_bias_surface()}
when no template is provided.}

\item{suitable_env}{Optional. A precomputed suitability object describing
the suitable environment pool. May be:
\itemize{
  \item a \code{terra::SpatRaster} or \code{raster::Raster*} already
        containing suitability and Mahalanobis distances, or
  \item a \code{data.frame} / \code{matrix} with columns \code{x},
        \code{y}, and \code{dist_sq}, typically produced by
        \code{get_suitable_env(..., out = "data.frame", distances = TRUE)}.
}
When supplied, \code{get_suitable_env()} is not called internally.}

\item{seed}{An integer used to set the random number generator seed for
reproducible results.}
}
\value{
A \code{data.frame} containing \code{n_occ} sampled rows from the
  suitable environment pool, including the \code{x} and \code{y} coordinates
  and the environmental predictor values.
}
\description{
This function samples occurrence points from a background environmental
dataset based on a defined ellipsoid niche. Sampling can be biased towards
the center, the edge, or be purely random. Optionally, a sampling bias
surface can be supplied to modulate the probability of selecting each
suitable location.
}
\details{
The function first obtains a pool of suitable environments either by:
\enumerate{
  \item calling \code{get_suitable_env()} on \code{env_bg}, or
  \item using a user-supplied \code{suitable_env} object that already
        contains suitability and Mahalanobis distances.
}

It then applies a weighting scheme based on \code{method} and, if provided,
a pooled bias surface (either raw layers via \code{set_bias_surface()} or a
precomputed \code{nicheR_bias_surface}) to probabilistically select
\code{n_occ} points from this suitable environment pool.
}
\seealso{
\code{\link{build_ellipsoid}}, \code{\link{get_suitable_env}},
  \code{\link{set_bias_surface}}
}
